<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	 id="sub_projectnotes">

			<!-- ##### Project Notes ######### -->
				<a4j:outputPanel layout="block" styleClass="sywapp-view-body" rendered="#{! empty projectNotesMB.notes}">
				
				<rich:panel rendered="#{! empty projectNotesMB.notes}">
					<f:facet name="header">
						<h:outputText value="#{messages.sub_title_notes}" />
					</f:facet>


					<rich:dataList var="mynote" value="#{projectNotesMB.notes}"
						rowClasses="sywapp-viewentry">


						<h3>
							<h:outputText value="#{mynote.item['txtProjectName']}: " />
							<h:outputText value="#{mynote.item['txtSubject']}" />
							
						</h3>
						
						<h:outputText value="#{mynote.item['$created']}">
							<f:convertDateTime type="both" dateStyle="medium" />
						</h:outputText>
						<h:outputText value=" #{global.by}: " />
						<h:outputText
							value="#{nameLookupMB.userName[mynote.item['namCreator']]}" />
						<br />

						<h:outputText value="#{mynote.item['htmlabstract']}"
							escape="false" />

						<rich:modalPanel id="notes_panel_id" width="650" minHeight="300" >
							<f:facet name="header">
								<h:panelGroup>
									<h:outputText value="#{mynote.item['$created']}">
										<f:convertDateTime type="both" dateStyle="medium" />
									</h:outputText>
									<h:outputText style="font-weight: bold;" value="#{global.by}: " />
									<h:outputText
										value="#{nameLookupMB.userName[mynote.item['namCreator']]}" />

								</h:panelGroup>
							</f:facet>
							<f:facet name="controls">
								<h:panelGroup>
									<h:graphicImage value="/layout/img/close.png"
										style="cursor:pointer" id="hidelink" />
									<rich:componentControl for="notes_panel_id" attachTo="hidelink"
										operation="hide" event="onclick" />
								</h:panelGroup>
							</f:facet>

							<div class="sywapp-view-body sywapp-worklist-body">
								<h3><h:outputText style="font-weight: bold; font-size:14px;"
								value="#{mynote.item['txtProjectName']}: #{mynote.item['txtSubject']}" />
							</h3>
							<p>
							<h:outputText escape="false" value="#{mynote.item['htmldetail']}" />
							</p>
							</div>
							<a href="#" onclick="#{rich:component('notes_panel_id')}.hide()">
							<h:outputText value="#{global.close}" /></a>

						</rich:modalPanel>


						<ul class="sywapp-viewentry-nav">
							<li><h:outputLink value="#" id="link" rendered="false">
								<h:outputText value="#{global.open}" />
								<rich:componentControl for="notes_panel_id" attachTo="link"
									operation="show" event="onclick" />
							</h:outputLink></li>


							<li><h:commandLink action="notes"
								actionListener="#{projectNotesMB.doRemoveUserFromNote}">
								<h:outputText value="#{global.delete}" />

							</h:commandLink></li>

						</ul>

					</rich:dataList>


				</rich:panel>

				</a4j:outputPanel>

</f:subview>

