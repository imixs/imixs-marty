<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">

	<ui:define name="content">

		<f:view>
			<f:loadBundle basename="bundle.workitem" var="messages" />

			<h:form>

				<h2><h:outputText value="#{projectMB.item['txtname']}: " /> <h:outputText
					value="#{workitemMB.item['txtworkflowgroup']}" /></h2>


				<!-- ### current Workflow ##### -->
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="#{workitemMB.item['txtsubject']}" />
					</f:facet>
					<dl>
						<dt><h:outputText value="#{global.created}: " /> <h:outputText
							value="#{workitemMB.item['$created']}">
							<f:convertDateTime type="both" dateStyle="short"
								pattern="dd.MMM.yy HH:mm:ss" />
						</h:outputText> <h:outputText
							value=" #{global.by} #{workitemMB.item['namCreator']}" /></dt>

						<dt><h:outputText value="#{global.modified}: " /> <h:outputText
							value="#{workitemMB.item['$modified']}">
							<f:convertDateTime type="both" dateStyle="short"
								pattern="dd.MMM.yy HH:mm:ss" />
						</h:outputText> <h:outputText value=" by #{workitemMB.item['namCurrentEditor']}" />
						</dt>
						<dt><h:outputText
							value="#{workitemMB.item['txtWorkflowAbstract']}"
							rendered="#{! empty workitemMB.item['txtWorkflowAbstract']}" />

						</dt>

						<dt><h:outputText
							value="#{messages.current_project}: #{projectMB.item['txtname']}" /></dt>

					</dl>

				</rich:panel>



				<!-- ### move to Project ##### -->
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="#{messages.move_to_project}" />
					</f:facet>
					<dl>
						<dt><h:outputText value="#{global.my_projects}" /></dt>

						<dd><h:selectOneListbox
							value="#{workitemMB.item['$uniqueidRef']}">
							<f:selectItems value="#{projectlistMB.myProjectSelection}" />

						</h:selectOneListbox></dd>
					</dl>

					<h:commandButton value="#{global.cancel}" action="open_worklist" />
					<a4j:commandButton value="#{global.continue}" id="submit_button" />
					<rich:componentControl for="submit_panel" attachTo="submit_button"
						operation="show" event="onclick" />



				</rich:panel>



				<rich:modalPanel id="submit_panel" width="390" height="150">
					<f:facet name="header">
						<h:panelGroup>
							<h:outputText value="#{messages.move_help1}"></h:outputText>
						</h:panelGroup>
					</f:facet>
					<f:facet name="controls">
						<h:panelGroup>
							<h:graphicImage value="/layout/img/close.png"
								style="cursor:pointer" id="hidelink" />
							<rich:componentControl for="submit_panel" attachTo="hidelink"
								operation="hide" event="onclick" />
						</h:panelGroup>
					</f:facet>
					<h:outputText value="#{messages.move_help2}"></h:outputText>
					<br />
					<br />
					<h:outputText value="#{messages.move_help3}"></h:outputText>
					<br />
					<br />
					<a href="#" onclick="#{rich:component('submit_panel')}.hide()">
					<h:outputText value="#{global.cancel}"/></a>
					
					<rich:spacer width="24px"/>
					<h:commandLink action="open_workitem" value="#{global.continue}"
						actionListener="#{workitemMB.doMoveToProject}" />
				</rich:modalPanel>


			</h:form>
		</f:view>
	</ui:define>
</ui:composition>

