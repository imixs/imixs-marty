<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">

	<ui:define name="content"> 

		<f:view>
			<f:loadBundle basename="bundle.dms" var="dms_messages" />


			<h:form id="scheduler_form_id">
				<div class="sywapp-form">

					<div class="sywapp-form-header">
						<h2>
							<h:outputText value="Workflow Scheduler" />
						</h2>
						<rich:panel>
							<dl>
								<dt>
									<h:outputText
										value="#{dms_messages.admin_timer}: #{workflowSchedulerMB.configuration.item['txtName']}" />
								</dt>
								<dd></dd>
							</dl>
						</rich:panel>
					</div>

					<!-- ########## Error ########## -->
					<ui:include src="/pages/error_message.xhtml" />

					<div class="sywapp-form-body sywapp-project-body">
						<!-- **** General info ***** -->
						<rich:panel>
							<f:facet name="header">
								<h:outputText value="#{dms_messages.admin_timer_configuration}" />
							</f:facet>

							<dl class="columns-2">

								<dt>#{dms_messages.admin_start}:</dt>
								<dd>
									<rich:calendar id="startdate" datePattern="d.M.yy HH:mm"
										showApplyButton="true"
										value="#{workflowSchedulerMB.configuration.item['datstart']}">
									</rich:calendar>
								</dd>

								<dt>#{dms_messages.admin_stop}:</dt>

								<dd>
									<rich:calendar id="stopdate" datePattern="d.M.yy HH:mm"
										showApplyButton="true"
										value="#{workflowSchedulerMB.configuration.item['datstop']}">
									</rich:calendar>
								</dd>

							</dl>
							<dl class="columns-1">
								<dt>#{dms_messages.admin_run_every}:</dt>
								<dd>
									<h:inputText value="#{workflowSchedulerMB.configuration.item['hours']}"
										style="width:40px;" />
									hour(s)
									<h:inputText value="#{workflowSchedulerMB.configuration.item['minutes']}"
										style="width:40px;" />
									minutes
								</dd>



							</dl>

							<div style="clear: left;" />

						</rich:panel>




						<!-- **** Status ***** -->

						<rich:panel>
							<f:facet name="header">
								<h:outputText
									value="Status: #{workflowSchedulerMB.configuration.item['statusMessage']}" />
							</f:facet>
							<dl>
								<dt>
									<h:outputText value="ID: " />
									<h:outputText
										value="#{workflowSchedulerMB.configuration.item['$UniqueID']}" />

									<h:outputText
										rendered="#{!empty workflowSchedulerMB.configuration.item['nextTimeout']}"
										value=" (running)" />


								</dt>


								<dt>
									<h:outputText value="Interval: " />
									<h:outputText
										value="#{workflowSchedulerMB.configuration.item['numInterval']} ms" />
								</dt>




								<dt>
									<h:outputText value="Next Timeout: " />
									<h:outputText
										value="#{workflowSchedulerMB.configuration.item['nextTimeout']}"
										rendered="#{! empty workflowSchedulerMB.configuration.item['nextTimeout']}">
										<f:convertDateTime timeZone="#{global.timeZone}" type="both"
											pattern="d.M.yy HH:mm" />


									</h:outputText>
								</dt>

								<dt>
									<h:outputText value="Time Remaining: " />
									<h:outputText
										rendered="#{! empty workflowSchedulerMB.configuration.item['timeRemaining']}"
										value="&lt; #{workflowSchedulerMB.configuration.item['timeRemaining']} ms" />

								</dt>
								
	
								
								<dt>
									<h:outputText value="Last scan scheduled workitems: " />
									<h:outputText
										value="#{workflowSchedulerMB.configuration.item['numWorkItemsScheduled']}" />

								</dt>
								<dt>
									<h:outputText value="Last scan processed workitems: " />
									<h:outputText
										value="#{workflowSchedulerMB.configuration.item['numWorkItemsProcessed']}" />

								</dt>
								
							</dl>
						</rich:panel>
					</div>

					<div class="sywapp-form-footer sywapp-project-footer">

						<a4j:outputPanel styleClass="sywapp-viewentry" layout="block"
							style="">

							<h:outputLabel value="#{global.modified}: " />
							<h:outputText
								value="#{workflowSchedulerMB.configuration.item['$modified']} ">
								<f:convertDateTime timeZone="CEST" type="both"
									dateStyle="medium" />
							</h:outputText>
							<h:outputText
								value=" #{global.by} #{workflowSchedulerMB.configuration.item['namcurrenteditor']}" />

							<br />
						</a4j:outputPanel>

						<h:commandButton actionListener="#{workflowSchedulerMB.doSaveConfiguration}"
							value="Save">
						</h:commandButton>

						<h:commandButton actionListener="#{workflowSchedulerMB.doStartScheduler}"
							value="start">
						</h:commandButton>
						<h:commandButton actionListener="#{workflowSchedulerMB.doStopScheduler}"
							value="stop">
						</h:commandButton>
						<h:commandButton actionListener="#{workflowSchedulerMB.doRestartScheduler}"
							value="restart">
						</h:commandButton>




						<h:commandButton value="#{global.close}"
							action="home" />




					</div>
				</div>




			</h:form>
		</f:view>
	</ui:define>



</ui:composition>
