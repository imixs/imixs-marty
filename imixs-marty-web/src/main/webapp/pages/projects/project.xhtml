<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">

	<ui:define name="content">

		<!-- Documentinfo: $UniqueID= #{projectMB.workitem.item['$uniqueid']}-->
		<f:view>
			<f:loadBundle basename="bundle.project" var="messages" />
			<rich:dragIndicator id="indicator" />


			<h:form id="project_form_id">
			<div class="sywapp-form sywapp-project">
				<h2><h:outputText value="#{messages.title_edit_project}" /></h2>

				<!-- ########## Error ########## -->
				<ui:include src="/pages/error_message.xhtml" />

			<div class="sywapp-form-body sywapp-project-body">
				<rich:panel>
					<rich:tabPanel switchType="client">
						<rich:tab label="#{messages.sub_title_general}">

						<div class="sywapp-info-box">				
							<h:outputText value="#{messages.sub_help_general}" />
						</div>
							<dl>
								<dt><h:outputLabel for="name_id" value="#{messages.name}">
									<h:message style="color: red" for="name_id" showSummary="true"
										showDetail="false" />
								</h:outputLabel></dt>
								<dd><h:outputText
									rendered="#{! empty projectMB.workitem.item['txtParentname']}"
									value="#{projectMB.workitem.item['txtParentname']}." /> <h:inputText
									style="width: 20em;" required="true"
									value="#{projectMB.workitem.item['txtProjectname']}" id="name_id">
								</h:inputText></dd>

								<dt><h:outputLabel for="description_id"
									value="#{messages.description}">
									<h:message style="color: red" for="description_id"
										showDetail="false" showSummary="true" />
								</h:outputLabel></dt>

								<dd><h:inputTextarea required="false"
									value="#{projectMB.workitem.item['txtdescription']}" id="description_id"
									style="height: 5em; width: 95%">
								</h:inputTextarea></dd>

							</dl>
						</rich:tab>



						<!-- ******** Project Members ********* -->
						<rich:tab label="#{messages.sub_title_team}" id="tab_team_lists_id">

							<dl>

								<!-- ******** Project Owners ********* -->

								<dt><h:outputText value="#{messages.team_owner}" /></dt>
								<dd class="sywapp-info-box"><h:outputText value="#{messages.sub_help_owner}" /></dd>
								<dd><a4j:region>

									<h:panelGrid columns="3" rowClasses="vertTop" style="padding-bottom:20px;">

										<h:panelGroup>
											<h:inputText id="new_owner_input_id" style="width: 20em;"
												autocomplete="false" onfocus="this.value='';" />
											<a4j:commandButton value="#{global.add}"
												id="owner_add_command_id"
												actionListener="#{projectMB.doAddUserImmediate}"
												reRender="owner_datatable_id, owner_error_message_id, new_owner_input_id" />
											<br />
											
											<rich:dataTable id="owner_datatable_id" columns="2"
												value="#{projectMB.workitem.itemListArray['namowner']}" rows="5"
												var="record">
												<rich:column sortBy="#{nameLookupMB.userName[record]}"
													sortOrder="ASCENDING">
													<h:outputText value="#{nameLookupMB.userName[record]}" />
												</rich:column>
												<rich:column>
													<h:outputText value="#{nameLookupMB.email[record]}" />
												</rich:column>
												<!-- Delete member -->
												<rich:column>
													<a4j:commandLink value="#{global.remove}"
														id="remove_owner_link_id"
														actionListener="#{projectMB.doRemoveUser}"
														reRender="owner_datatable_id">
													</a4j:commandLink>
												</rich:column>
											</rich:dataTable>
											<rich:datascroller align="left" for="owner_datatable_id"
											rendered="#{!empty projectMB.workitem.itemListArray['namowner']}" />
										</h:panelGroup>


										<h:panelGroup id="owner_error_message_id">
											<h:message style="color: red" for="new_owner_input_id"
												showDetail="true" showSummary="false" />
										</h:panelGroup>

									</h:panelGrid>
								</a4j:region></dd>





								<!-- ******** Project Manager ********* -->

								<dt><h:outputText value="#{messages.team_manager}" /></dt>
								<dd class="sywapp-info-box"><h:outputText value="#{messages.sub_help_manager}" /></dd>
								<dd><h:panelGrid columns="3" rowClasses="vertTop" style="padding-bottom:20px;">

									<h:panelGroup>
										<h:inputText id="new_manager_input_id" style="width: 20em;"
											autocomplete="false" onfocus="this.value='';" />
										
										<a4j:commandButton value="#{global.add}"
											id="manager_add_command_id"
											actionListener="#{projectMB.doAddUserImmediate}"
											reRender="manager_datatable_id, manager_error_message_id, new_manager_input_id" />
										<br />
										
										<rich:dataTable id="manager_datatable_id" columns="2"
											value="#{projectMB.workitem.itemListArray['nammanager']}" rows="5"
											var="record">
											<rich:column sortBy="#{nameLookupMB.userName[record]}"
												sortOrder="ASCENDING">
												<h:outputText value="#{nameLookupMB.userName[record]}" />
											</rich:column>
											<rich:column>
												<h:outputText value="#{nameLookupMB.email[record]}" />
											</rich:column>
											<!-- Delete member -->
											<rich:column>
												<a4j:commandLink value="#{global.remove}"
													id="remove_manager_link_id"
													actionListener="#{projectMB.doRemoveUser}"
													reRender="manager_datatable_id">
												</a4j:commandLink>
											</rich:column>
										</rich:dataTable>
										<rich:datascroller align="left" for="manager_datatable_id"
											rendered="#{!empty projectMB.workitem.itemListArray['nammanager']}" />
									</h:panelGroup>

									<h:panelGroup id="manager_error_message_id">
										<h:message id="namemanagerError" style="color: red"
											for="new_manager_input_id" showDetail="true"
											showSummary="false" />
									</h:panelGroup>
								</h:panelGrid></dd>

							
								<!-- ******** Project Team ********* -->
								
								<dt><h:outputText value="#{messages.team_team}" /></dt>
								<dd class="sywapp-info-box"><h:outputText value="#{messages.sub_help_team}" /></dd>
								<dd><h:panelGrid columns="2" rowClasses="vertTop" style="padding-bottom:20px;">

									<h:panelGroup>
										<h:inputText id="new_team_input_id" style="width: 20em;"
											autocomplete="true" onfocus="this.value='';" />
										<a4j:commandButton value="#{global.add}"
											id="team_add_command_id"
											actionListener="#{projectMB.doAddUserImmediate}"
											reRender="team_datatable_id,team_error_message_id, new_team_input_id" />
										<br />

										<rich:dataTable id="team_datatable_id" columns="2"
											value="#{projectMB.workitem.itemListArray['namteam']}" rows="5"
											var="record">
											<rich:column sortBy="#{nameLookupMB.userName[record]}"
												sortOrder="ASCENDING">
												<h:outputText value="#{nameLookupMB.userName[record]}" />
											</rich:column>
											<rich:column>
												<h:outputText value="#{nameLookupMB.email[record]}" />
											</rich:column>
											<!-- Delete member -->
											<rich:column>
												<a4j:commandLink value="#{global.remove}"
													id="remove_team_link_id"
													actionListener="#{projectMB.doRemoveUser}"
													reRender="team_datatable_id">
												</a4j:commandLink>
											</rich:column>
										</rich:dataTable>
										<rich:datascroller align="left" for="team_datatable_id"
											rendered="#{!empty projectMB.workitem.itemListArray['namteam']}" />
									</h:panelGroup>
									<h:panelGroup id="team_error_message_id">
										<h:message id="nameError" style="color: red"
											for="new_team_input_id" showDetail="true" showSummary="false" />
									</h:panelGroup>
								</h:panelGrid></dd>



								<!-- ******** Project Assistance ********* -->

								<dt><h:outputText value="#{messages.team_assist}" /></dt>
								<dd class="sywapp-info-box"><h:outputText value="#{messages.sub_help_assist}" /></dd>
								<dd><h:panelGrid columns="3" rowClasses="vertTop" style="padding-bottom:0px;">

									<h:panelGroup>
										<h:inputText id="new_assist_input_id" style="width: 20em;"
											autocomplete="false" onfocus="this.value='';" />
										<a4j:commandButton value="#{global.add}"
											id="assist_add_command_id"
											actionListener="#{projectMB.doAddUserImmediate}"
											reRender="assist_datatable_id,assist_error_message_id, new_assist_input_id" />
										<br />
										
										<rich:dataTable id="assist_datatable_id" columns="2"
											value="#{projectMB.workitem.itemListArray['namassist']}" rows="5"
											var="record">
											<rich:column sortBy="#{nameLookupMB.userName[record]}"
												sortOrder="ASCENDING">
												<h:outputText value="#{nameLookupMB.userName[record]}" />
											</rich:column>
											<rich:column>
												<h:outputText value="#{nameLookupMB.email[record]}" />
											</rich:column>
											<!-- Delete member -->
											<rich:column>
												<a4j:commandLink value="#{global.remove}"
													id="remove_assist_link_id"
													actionListener="#{projectMB.doRemoveUser}"
													reRender="assist_datatable_id">
												</a4j:commandLink>
											</rich:column>
										</rich:dataTable>
										<rich:datascroller align="left" for="assist_datatable_id"
											rendered="#{!empty projectMB.workitem.itemListArray['namassist']}" />
									</h:panelGroup>

									<h:panelGroup id="assist_error_message_id">
										<h:message id="nameassistError" style="color: red"
											for="new_assist_input_id" showDetail="true"
											showSummary="false" />
									</h:panelGroup>
								</h:panelGrid></dd>



							</dl>

						</rich:tab>



						<!-- ******** Process List ********* -->
						<rich:tab label="#{messages.sub_title_processlist}">


							<div class="sywapp-info-box">
							<h:outputText value="#{messages.sub_help_processlist}" />
							</div>
							<a4j:outputPanel layout="block"
								style="overflow: auto; width: 600px;">


							 <rich:pickList sourceListWidth="200px" targetListWidth="200px" value="#{projectMB.processList}" >
									<f:selectItems value="#{modelMB.startProcessList}"/>
							 </rich:pickList>



							</a4j:outputPanel>

							<div style="clear: both;" />


						</rich:tab>
						
						
									
					</rich:tabPanel>
				</rich:panel>
				</div>
				
				<div class="sywapp-form-footer sywapp-project-footer">
							
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="#{global.workflow}" />
					</f:facet>

					<h:outputText
						value="#{global.modified}: #{projectMB.workitem.item['$modified']}">
						<f:convertDateTime type="both" dateStyle="short"
							pattern="dd.MMM.yy HH:mm:ss" />
					</h:outputText>
					<h:outputText
						value=" #{global.by} #{nameLookupMB.userName[projectMB.workitem.item['namCurrentEditor']]}" />
					<br />
					<br />
					<ui:repeat value="#{projectMB.activities}" var="activity">
						<h:commandButton action="admin_projectlist"
							actionListener="#{projectMB.doProcess}"
							value="#{activity.item['txtname']}">
							<f:param name="id" value="#{activity.item['numactivityid']}" />
						</h:commandButton>

					</ui:repeat>
					<h:commandButton immediate="true" value="#{global.close}"  action="admin_projectlist" />


				</rich:panel>
				
				</div>
				
				</div>
			</h:form>
		</f:view>
	</ui:define>



</ui:composition>

